!function(e){function t(t){this.el=void 0,this.opts=e.extend(!0,{},this.defaults,t),this.noMasksCache=t&&void 0!==t.definitions,this.userOptions=t||{},a(this.opts.alias,t,this.opts)}function i(e){var t=document.createElement("input"),i="on"+e,n=i in t;return n||(t.setAttribute(i,"return;"),n="function"==typeof t[i]),t=null,n}function n(e){var t="text"===e||"tel"===e||"password"===e;if(!t){var i=document.createElement("input");i.setAttribute("type",e),t="text"===i.type,i=null}return t}function a(t,i,n){var o=n.aliases[t];return o?(o.alias&&a(o.alias,void 0,n),e.extend(!0,n,o),e.extend(!0,n,i),!0):(void 0===n.mask&&(n.mask=t),!1)}function o(t,i,n){function o(e){var t=r.data("inputmask-"+e.toLowerCase());void 0!==t&&(t="boolean"==typeof t?t:t.toString(),"mask"===e&&0===t.indexOf("[")?(n[e]=t.replace(/[\s[\]]/g,"").split(","),n[e][0]=n[e][0].replace("'",""),n[e][n[e].length-1]=n[e][n[e].length-1].replace("'","")):n[e]=t)}var r=e(t),s=r.data("inputmask");if(s&&""!==s)try{s=s.replace(new RegExp("'","g"),'"');var l=e.parseJSON("{"+s+"}");e.extend(!0,n,l)}catch(u){}for(var c in i)o(c);if(n.alias){a(n.alias,n,i);for(c in i)o(c)}return e.extend(!0,i,n),i}function r(i,n){function a(t){function n(e,t,i,n){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function a(t,n,a){var o=i.definitions[n];a=void 0!==a?a:t.matches.length;var r=t.matches[a-1];if(o&&!k){o.placeholder=e.isFunction(o.placeholder)?o.placeholder.call(this,i):o.placeholder;for(var s=o.prevalidator,l=s?s.length:0,u=1;u<o.cardinality;u++){var c=l>=u?s[u-1]:[],p=c.validator,d=c.cardinality;t.matches.splice(a++,0,{fn:p?"string"==typeof p?new RegExp(p):new function(){this.test=p}:new RegExp("."),cardinality:d?d:1,optionality:t.isOptional,newBlockMarker:void 0===r||r.def!==(o.definitionSymbol||n),casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n}),r=t.matches[a-1]}t.matches.splice(a++,0,{fn:o.validator?"string"==typeof o.validator?new RegExp(o.validator):new function(){this.test=o.validator}:new RegExp("."),cardinality:o.cardinality,optionality:t.isOptional,newBlockMarker:void 0===r||r.def!==(o.definitionSymbol||n),casing:o.casing,def:o.definitionSymbol||n,placeholder:o.placeholder,mask:n})}else t.matches.splice(a++,0,{fn:null,cardinality:0,optionality:t.isOptional,newBlockMarker:void 0===r||r.def!==n,casing:null,def:n,placeholder:void 0,mask:n}),k=!1}function o(e,t){e.isGroup&&(e.isGroup=!1,a(e,i.groupmarker.start,0),t!==!0&&a(e,i.groupmarker.end))}function r(e,t,i,n){t.matches.length>0&&(void 0===n||n)&&(i=t.matches[t.matches.length-1],o(i)),a(t,e)}function s(){if(b.length>0){if(d=b[b.length-1],r(c,d,v,!d.isAlternator),d.isAlternator){f=b.pop();for(var e=0;e<f.matches.length;e++)f.matches[e].isGroup=!1;b.length>0?(d=b[b.length-1],d.matches.push(f)):g.matches.push(f)}}else r(c,g,v)}function l(e){function t(e){return e===i.optionalmarker.start?e=i.optionalmarker.end:e===i.optionalmarker.end?e=i.optionalmarker.start:e===i.groupmarker.start?e=i.groupmarker.end:e===i.groupmarker.end&&(e=i.groupmarker.start),e}e.matches=e.matches.reverse();for(var n in e.matches){var a=parseInt(n);if(e.matches[n].isQuantifier&&e.matches[a+1]&&e.matches[a+1].isGroup){var o=e.matches[n];e.matches.splice(n,1),e.matches.splice(a+1,0,o)}e.matches[n]=void 0!==e.matches[n].matches?l(e.matches[n]):t(e.matches[n])}return e}for(var u,c,p,d,f,v,m,h=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,k=!1,g=new n,b=[],y=[];u=h.exec(t);)if(c=u[0],k)s();else switch(c.charAt(0)){case i.escapeChar:k=!0;break;case i.optionalmarker.end:case i.groupmarker.end:if(p=b.pop(),void 0!==p)if(b.length>0){if(d=b[b.length-1],d.matches.push(p),d.isAlternator){f=b.pop();for(var P=0;P<f.matches.length;P++)f.matches[P].isGroup=!1;b.length>0?(d=b[b.length-1],d.matches.push(f)):g.matches.push(f)}}else g.matches.push(p);else s();break;case i.optionalmarker.start:b.push(new n(!1,!0));break;case i.groupmarker.start:b.push(new n(!0));break;case i.quantifiermarker.start:var _=new n(!1,!1,!0);c=c.replace(/[{}]/g,"");var C=c.split(","),w=isNaN(C[0])?C[0]:parseInt(C[0]),E=1===C.length?w:isNaN(C[1])?C[1]:parseInt(C[1]);if(("*"===E||"+"===E)&&(w="*"===E?0:1),_.quantifier={min:w,max:E},b.length>0){var x=b[b.length-1].matches;u=x.pop(),u.isGroup||(m=new n(!0),m.matches.push(u),u=m),x.push(u),x.push(_)}else u=g.matches.pop(),u.isGroup||(m=new n(!0),m.matches.push(u),u=m),g.matches.push(u),g.matches.push(_);break;case i.alternatormarker:b.length>0?(d=b[b.length-1],v=d.matches.pop()):v=g.matches.pop(),v.isAlternator?b.push(v):(f=new n(!1,!1,!1,!0),f.matches.push(v),b.push(f));break;default:s()}for(;b.length>0;)p=b.pop(),o(p,!0),g.matches.push(p);return g.matches.length>0&&(v=g.matches[g.matches.length-1],o(v),y.push(g)),i.numericInput&&l(y[0]),y}function o(o,r){if(void 0===o||""===o)return void 0;if(1===o.length&&i.greedy===!1&&0!==i.repeat&&(i.placeholder=""),i.repeat>0||"*"===i.repeat||"+"===i.repeat){var s="*"===i.repeat?0:"+"===i.repeat?1:i.repeat;o=i.groupmarker.start+o+i.groupmarker.end+i.quantifiermarker.start+s+","+i.repeat+i.quantifiermarker.end}var l;return void 0===t.prototype.masksCache[o]||n===!0?(l={mask:o,maskToken:a(o),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:r},n!==!0&&(t.prototype.masksCache[i.numericInput?o.split("").reverse().join(""):o]=l)):l=e.extend(!0,{},t.prototype.masksCache[o]),l}function r(e){return e=e.toString()}var s;if(e.isFunction(i.mask)&&(i.mask=i.mask.call(this,i)),e.isArray(i.mask)){if(i.mask.length>1){i.keepStatic=void 0===i.keepStatic?!0:i.keepStatic;var l="(";return e.each(i.numericInput?i.mask.reverse():i.mask,function(t,i){l.length>1&&(l+=")|("),l+=r(void 0===i.mask||e.isFunction(i.mask)?i:i.mask)}),l+=")",o(l,i.mask)}i.mask=i.mask.pop()}return i.mask&&(s=void 0===i.mask.mask||e.isFunction(i.mask.mask)?o(r(i.mask),i.mask):o(r(i.mask.mask),i.mask)),s}function s(a,o,r){function s(e,t,i){t=t||0;var n,a,o,r=[],s=0;do{if(e===!0&&l().validPositions[s]){var u=l().validPositions[s];a=u.match,n=u.locator.slice(),r.push(i===!0?u.input:D(s,a))}else o=k(s,n,s-1),a=o.match,n=o.locator.slice(),r.push(D(s,a));s++}while((void 0===nt||nt>s-1)&&null!==a.fn||null===a.fn&&""!==a.def||t>=s);return r.pop(),r}function l(){return o}function f(e){var t=l();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function v(e,t){var i=l(),n=-1,a=i.validPositions;void 0===e&&(e=-1);var o=n,r=n;for(var s in a){var u=parseInt(s);a[u]&&(t||null!==a[u].match.fn)&&(e>=u&&(o=u),u>=e&&(r=u))}return n=-1!==o&&e-o>1||e>r?o:r}function m(t,i,n){if(r.insertMode&&void 0!==l().validPositions[t]&&void 0===n){var a,o=e.extend(!0,{},l().validPositions),s=v();for(a=t;s>=a;a++)delete l().validPositions[a];l().validPositions[t]=i;var u,c=!0,p=l().validPositions;for(a=u=t;s>=a;a++){var d=o[a];if(void 0!==d)for(var f=u,m=-1;f<S()&&(null==d.match.fn&&p[a]&&(p[a].match.optionalQuantifier===!0||p[a].match.optionality===!0)||null!=d.match.fn);){if(null===d.match.fn||!r.keepStatic&&p[a]&&(void 0!==p[a+1]&&y(a+1,p[a].locator.slice(),a).length>1||void 0!==p[a].alternation)?f++:f=A(u),b(f,d.match.def)){c=x(f,d.input,!0,!0)!==!1,u=f;break}if(c=null==d.match.fn,m===f)break;m=f}if(!c)break}if(!c)return l().validPositions=e.extend(!0,{},o),!1}else l().validPositions[t]=i;return!0}function h(e,t,i,n){var a,o=e;for(l().p=e,a=o;t>a;a++)void 0!==l().validPositions[a]&&(i===!0||r.canClearPosition(l(),a,v(),n,r)!==!1)&&delete l().validPositions[a];for(f(!0),a=o+1;a<=v();){for(;void 0!==l().validPositions[o];)o++;var s=l().validPositions[o];o>a&&(a=o+1);var u=l().validPositions[a];void 0!==u&&M(a)&&void 0===s?(b(o,u.match.def)&&x(o,u.input,!0)!==!1&&(delete l().validPositions[a],a++),o++):a++}var c=v(),p=S();for(n!==!0&&i!==!0&&void 0!==l().validPositions[c]&&l().validPositions[c].input===r.radixPoint&&delete l().validPositions[c],a=c+1;p>=a;a++)l().validPositions[a]&&delete l().validPositions[a];f(!0)}function k(e,t,i){var n=l().validPositions[e];if(void 0===n)for(var a=y(e,t,i),o=v(),s=l().validPositions[o]||y(0)[0],u=void 0!==s.alternation?s.locator[s.alternation].toString().split(","):[],c=0;c<a.length&&(n=a[c],!(n.match&&(r.greedy&&n.match.optionalQuantifier!==!0||(n.match.optionality===!1||n.match.newBlockMarker===!1)&&n.match.optionalQuantifier!==!0)&&(void 0===s.alternation||s.alternation!==n.alternation||void 0!==n.locator[s.alternation]&&E(n.locator[s.alternation].toString().split(","),u))));c++);return n}function g(e){return l().validPositions[e]?l().validPositions[e].match:y(e)[0].match}function b(e,t){for(var i=!1,n=y(e),a=0;a<n.length;a++)if(n[a].match&&n[a].match.def===t){i=!0;break}return i}function y(t,i,n,a){function o(i,n,a,u){function p(a,u,v){if(c>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+l().mask),!0;if(c===t&&void 0===a.matches)return d.push({match:a,locator:u.reverse()}),!0;if(void 0!==a.matches){if(a.isGroup&&v!==a){if(a=p(i.matches[e.inArray(a,i.matches)+1],u))return!0}else if(a.isOptional){var m=a;if(a=o(a,n,u,v)){if(r=d[d.length-1].match,s=0===e.inArray(r,m.matches),!s)return!0;f=!0,c=t}}else if(a.isAlternator){var h,k=a,g=[],b=d.slice(),y=u.length,P=n.length>0?n.shift():-1;if(-1===P||"string"==typeof P){var _=c,C=n.slice(),w=[];"string"==typeof P&&(w=P.split(","));for(var E=0;E<k.matches.length;E++){if(d=[],a=p(k.matches[E],[E].concat(u),v)||a,a!==!0&&void 0!==a&&w[w.length-1]<k.matches.length){var x=i.matches.indexOf(a)+1;i.matches.length>x&&(a=p(i.matches[x],[x].concat(u.slice(1,u.length)),v),a&&(w.push(x.toString()),e.each(d,function(e,t){t.alternation=u.length-1})))}h=d.slice(),c=_,d=[];for(var M=0;M<C.length;M++)n[M]=C[M];for(var S=0;S<h.length;S++){var A=h[S];A.alternation=A.alternation||y;for(var j=0;j<g.length;j++){var O=g[j];if(A.match.mask===O.match.mask&&("string"!=typeof P||-1!==e.inArray(A.locator[A.alternation].toString(),w))){h.splice(S,1),S--,O.locator[A.alternation]=O.locator[A.alternation]+","+A.locator[A.alternation],O.alternation=A.alternation;break}}}g=g.concat(h)}"string"==typeof P&&(g=e.map(g,function(t,i){if(isFinite(i)){var n,a=t.alternation,o=t.locator[a].toString().split(",");t.locator[a]=void 0,t.alternation=void 0;for(var r=0;r<o.length;r++)n=-1!==e.inArray(o[r],w),n&&(void 0!==t.locator[a]?(t.locator[a]+=",",t.locator[a]+=o[r]):t.locator[a]=parseInt(o[r]),t.alternation=a);if(void 0!==t.locator[a])return t}})),d=b.concat(g),c=t,f=d.length>0}else a=k.matches[P]?p(k.matches[P],[P].concat(u),v):!1;if(a)return!0}else if(a.isQuantifier&&v!==i.matches[e.inArray(a,i.matches)-1])for(var T=a,D=n.length>0?n.shift():0;D<(isNaN(T.quantifier.max)?D+1:T.quantifier.max)&&t>=c;D++){var G=i.matches[e.inArray(T,i.matches)-1];if(a=p(G,[D].concat(u),G)){if(r=d[d.length-1].match,r.optionalQuantifier=D>T.quantifier.min-1,s=0===e.inArray(r,G.matches)){if(D>T.quantifier.min-1){f=!0,c=t;break}return!0}return!0}}else if(a=o(a,n,u,v))return!0}else c++}for(var v=n.length>0?n.shift():0;v<i.matches.length;v++)if(i.matches[v].isQuantifier!==!0){var m=p(i.matches[v],[v].concat(a),u);if(m&&c===t)return m;if(c>t)break}}var r,s,u=l().maskToken,c=i?n:0,p=i||[0],d=[],f=!1;if(a===!0&&l().tests[t])return l().tests[t];if(void 0===i){for(var v,m=t-1;void 0===(v=l().validPositions[m])&&m>-1&&(!l().tests[m]||void 0===(v=l().tests[m][0]));)m--;void 0!==v&&m>-1&&(c=m,p=v.locator.slice())}for(var h=p.shift();h<u.length;h++){var k=o(u[h],p,[h]);if(k&&c===t||c>t)break}return(0===d.length||f)&&d.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),l().tests[t]=e.extend(!0,[],d),l().tests[t]}function P(){return void 0===l()._buffer&&(l()._buffer=s(!1,1)),l()._buffer}function _(){return void 0===l().buffer&&(l().buffer=s(!0,v(),!0)),l().buffer}function C(e,t,i){var n;if(i=i||_().slice(),e===!0)f(),e=0,t=i.length;else for(n=e;t>n;n++)delete l().validPositions[n],delete l().tests[n];for(n=e;t>n;n++)f(!0),i[n]!==r.skipOptionalPartCharacter&&x(n,i[n],!0,!0)}function w(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function E(t,i){for(var n=r.greedy?i:i.slice(0,1),a=!1,o=0;o<t.length;o++)if(-1!==e.inArray(t[o],n)){a=!0;break}return a}function x(t,i,n,a){function o(t,i,n,a){var o=!1;return e.each(y(t),function(s,u){for(var c=u.match,p=i?1:0,d="",k=c.cardinality;k>p;k--)d+=O(t-(k-1));if(i&&(d+=i),o=null!=c.fn?c.fn.test(d,l(),t,n,r):i!==c.def&&i!==r.skipOptionalPartCharacter||""===c.def?!1:{c:c.def,pos:t},o!==!1){var g=void 0!==o.c?o.c:i;g=g===r.skipOptionalPartCharacter&&null===c.fn?c.def:g;var b=t,y=_();if(void 0!==o.remove&&(e.isArray(o.remove)||(o.remove=[o.remove]),e.each(o.remove.sort(function(e,t){return t-e}),function(e,t){h(t,t+1,!0)})),void 0!==o.insert&&(e.isArray(o.insert)||(o.insert=[o.insert]),e.each(o.insert.sort(function(e,t){return e-t}),function(e,t){x(t.pos,t.c,!0)})),o.refreshFromBuffer){var P=o.refreshFromBuffer;if(n=!0,C(P===!0?P:P.start,P.end,y),void 0===o.pos&&void 0===o.c)return o.pos=v(),!1;if(b=void 0!==o.pos?o.pos:t,b!==t)return o=e.extend(o,x(b,g,!0)),!1}else if(o!==!0&&void 0!==o.pos&&o.pos!==t&&(b=o.pos,C(t,b),b!==t))return o=e.extend(o,x(b,g,!0)),!1;return o!==!0&&void 0===o.pos&&void 0===o.c?!1:(s>0&&f(!0),m(b,e.extend({},u,{input:w(g,c)}),a)||(o=!1),!1)}}),o}function s(t,i,n,a){for(var o,s,u,c,p,d,m=e.extend(!0,{},l().validPositions),h=v();h>=0&&(c=l().validPositions[h],!c||void 0===c.alternation||(o=h,s=l().validPositions[o].alternation,k(o).locator[c.alternation]===c.locator[c.alternation]));h--);if(void 0!==s){o=parseInt(o);for(var g in l().validPositions)if(g=parseInt(g),c=l().validPositions[g],g>=o&&void 0!==c.alternation){var b=l().validPositions[o].locator[s].toString().split(","),y=c.locator[s]||b[0];y.length>0&&(y=y.split(",")[0]);for(var P=0;P<b.length;P++)if(y<b[P]){for(var _,C,w=g;w>=0;w--)if(_=l().validPositions[w],void 0!==_){C=_.locator[s],_.locator[s]=parseInt(b[P]);break}if(y!==_.locator[s]){var E=[],M=0;for(p=g+1;p<v()+1;p++)d=l().validPositions[p],d&&(null!=d.match.fn?E.push(d.input):t>p&&M++),delete l().validPositions[p],delete l().tests[p];for(f(!0),r.keepStatic=!r.keepStatic,u=!0;E.length>0;){var S=E.shift();if(S!==r.skipOptionalPartCharacter&&!(u=x(v()+1,S,!1,!0)))break}if(_.alternation=s,_.locator[s]=C,u){var A=v(t)+1,j=0;for(p=g+1;p<v()+1;p++)d=l().validPositions[p],d&&null==d.match.fn&&t>p&&j++;t+=j-M,u=x(t>A?A:t,i,n,a)}if(r.keepStatic=!r.keepStatic,u)return u;f(),l().validPositions=e.extend(!0,{},m)}}break}}return!1}function u(t,i){for(var n=l().validPositions[i],a=n.locator,o=a.length,r=t;i>r;r++)if(!M(r)){var s=y(r),u=s[0],c=-1;e.each(s,function(e,t){for(var i=0;o>i;i++)t.locator[i]&&E(t.locator[i].toString().split(","),a[i].toString().split(","))&&i>c&&(c=i,u=t)}),m(r,e.extend({},u,{input:u.match.def}),!0)}}n=n===!0;for(var c=_(),p=t-1;p>-1&&!l().validPositions[p];p--);for(p++;t>p;p++)void 0===l().validPositions[p]&&((!M(p)||c[p]!==D(p))&&y(p).length>1||c[p]===r.radixPoint||"0"===c[p]&&e.inArray(r.radixPoint,c)<p)&&o(p,c[p],!0);var d=t,g=!1,b=e.extend(!0,{},l().validPositions);if(d<S()&&(_(),g=o(d,i,n,a),(!n||a)&&g===!1)){var P=l().validPositions[d];if(!P||null!==P.match.fn||P.match.def!==i&&i!==r.skipOptionalPartCharacter){if((r.insertMode||void 0===l().validPositions[A(d)])&&!M(d))for(var j=d+1,T=A(d);T>=j;j++)if(g=o(j,i,n,a),g!==!1){u(d,j),d=j;break}}else g={caret:A(d)}}if(g===!1&&r.keepStatic&&L(c)&&(g=s(t,i,n,a)),g===!0&&(g={pos:d}),e.isFunction(r.postValidation)&&g!==!1&&!n){f(!0);var G=r.postValidation(_(),r);if(G){if(G.refreshFromBuffer){var B=G.refreshFromBuffer;C(B===!0?B:B.start,B.end,G.buffer),f(!0),g=G}}else f(!0),l().validPositions=e.extend(!0,{},b),g=!1}return g}function M(e){var t=g(e);if(null!=t.fn)return t.fn;if(!r.keepStatic&&void 0===l().validPositions[e]){for(var i=y(e),n=!0,a=0;a<i.length;a++)if(""!==i[a].match.def&&(void 0===i[a].alternation||i[a].locator[i[a].alternation].length>1)){n=!1;break}return n}return!1}function S(){var e;nt=it.prop("maxLength"),-1===nt&&(nt=void 0);var t,i=v(),n=l().validPositions[i],a=void 0!==n?n.locator.slice():void 0;for(t=i+1;void 0===n||null!==n.match.fn||null===n.match.fn&&""!==n.match.def;t++)n=k(t,a,t-1),a=n.locator.slice();var o=g(t-1);return e=""!==o.def?t:t-1,void 0===nt||nt>e?e:nt}function A(e,t){var i=S();if(e>=i)return i;for(var n=e;++n<i&&(t===!0&&(g(n).newBlockMarker!==!0||!M(n))||t!==!0&&!M(n)&&(r.nojumps!==!0||r.nojumpsThreshold>n)););return n}function j(e,t){var i=e;if(0>=i)return 0;for(;--i>0&&(t===!0&&g(i).newBlockMarker!==!0||t!==!0&&!M(i)););return i}function O(e){return void 0===l().validPositions[e]?D(e):l().validPositions[e].input}function T(t,i,n,a,o){if(a&&e.isFunction(r.onBeforeWrite)){var s=r.onBeforeWrite.call(t,a,i,n,r);if(s){if(s.refreshFromBuffer){var l=s.refreshFromBuffer;C(l===!0?l:l.start,l.end,s.buffer||i),f(!0),i=_()}n=void 0!==s.caret?s.caret:n}}t.inputmask._valueSet(i.join("")),void 0===n||void 0!==a&&"blur"===a.type||I(t,n),o===!0&&(st=!0,e(t).trigger("input"))}function D(e,t){if(t=t||g(e),void 0!==t.placeholder)return t.placeholder;if(null===t.fn){if(!r.keepStatic&&void 0===l().validPositions[e]){for(var i,n=y(e),a=!1,o=0;o<n.length;o++){if(i&&""!==n[o].match.def&&n[o].match.def!==i.match.def&&(void 0===n[o].alternation||n[o].alternation===i.alternation)){a=!0;break}n[o].match.optionality!==!0&&n[o].match.optionalQuantifier!==!0&&(i=n[o])}if(a)return r.placeholder.charAt(e%r.placeholder.length)}return t.def}return r.placeholder.charAt(e%r.placeholder.length)}function G(i,n,a,o){function s(){var e=!1,t=P().slice(p,A(p)).join("").indexOf(c);if(-1!==t&&!M(p)){e=!0;for(var i=P().slice(p,p+t),n=0;n<i.length;n++)if(" "!==i[n]){e=!1;break}}return e}var u=void 0!==o?o.slice():i.inputmask._valueGet().split(""),c="",p=0;if(f(),l().p=A(-1),n&&i.inputmask._valueSet(""),!a)if(r.autoUnmask!==!0){var d=P().slice(0,A(-1)).join(""),m=u.join("").match(new RegExp("^"+t.escapeRegex(d),"g"));m&&m.length>0&&(u.splice(0,m.length*d.length),p=A(p))}else p=A(p);e.each(u,function(t,n){var o=e.Event("keypress");o.which=n.charCodeAt(0),c+=n;var u=v(void 0,!0),d=l().validPositions[u],f=k(u+1,d?d.locator.slice():void 0,u);if(!s()||a||r.autoUnmask){var m=a?t:null==f.match.fn&&f.match.optionality&&u+1<l().p?u+1:l().p;W.call(i,o,!0,!1,a,m),p=m+1,c=""}else W.call(i,o,!0,!1,!0,u+1)}),n&&T(i,_(),e(i).is(":focus")?A(v(0)):void 0,e.Event("checkval"))}function B(t){if(t[0].inputmask&&!t.hasClass("hasDatepicker")){var i=[],n=l().validPositions;for(var a in n)n[a].match&&null!=n[a].match.fn&&i.push(n[a].input);var o=0===i.length?null:(ot?i.reverse():i).join("");if(null!==o){var s=(ot?_().slice().reverse():_()).join("");e.isFunction(r.onUnMask)&&(o=r.onUnMask.call(t,s,o,r)||o)}return o}return t[0].inputmask._valueGet()}function I(t,i,n){function a(e){if(ot&&"number"==typeof e&&(!r.greedy||""!==r.placeholder)){var t=_().join("").length;e=t-e}return e}var o,s=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof i)return s.setSelectionRange?(i=s.selectionStart,n=s.selectionEnd):window.getSelection?(o=window.getSelection().getRangeAt(0),(o.commonAncestorContainer.parentNode===s||o.commonAncestorContainer===s)&&(i=o.startOffset,n=o.endOffset)):document.selection&&document.selection.createRange&&(o=document.selection.createRange(),i=0-o.duplicate().moveStart("character",-1e5),n=i+o.text.length),{begin:a(i),end:a(n)};if(i=a(i),n=a(n),n="number"==typeof n?n:i,e(s).is(":visible")){var l=e(s).css("font-size").replace("px","")*n;if(s.scrollLeft=l>s.scrollWidth?l:0,c||r.insertMode!==!1||i!==n||n++,s.setSelectionRange)s.selectionStart=i,s.selectionEnd=n;else if(window.getSelection){if(o=document.createRange(),void 0===s.firstChild){var u=document.createTextNode("");s.appendChild(u)}o.setStart(s.firstChild,i<s.inputmask._valueGet().length?i:s.inputmask._valueGet().length),o.setEnd(s.firstChild,n<s.inputmask._valueGet().length?n:s.inputmask._valueGet().length),o.collapse(!0);var p=window.getSelection();p.removeAllRanges(),p.addRange(o)}else s.createTextRange&&(o=s.createTextRange(),o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",i),o.select())}}function F(t){var i,n,a=_(),o=a.length,r=v(),s={},u=l().validPositions[r],c=void 0!==u?u.locator.slice():void 0;for(i=r+1;i<a.length;i++)n=k(i,c,i-1),c=n.locator.slice(),s[i]=e.extend(!0,{},n);var p=u&&void 0!==u.alternation?u.locator[u.alternation]:void 0;for(i=o-1;i>r&&(n=s[i],(n.match.optionality||n.match.optionalQuantifier||p&&(p!==s[i].locator[u.alternation]&&null!=n.match.fn||null===n.match.fn&&n.locator[u.alternation]&&E(n.locator[u.alternation].toString().split(","),p.toString().split(","))&&""!==y(i)[0].def))&&a[i]===D(i,n.match));i--)o--;return t?{l:o,def:s[o]?s[o].match:void 0}:o}function R(e){for(var t=F(),i=e.length-1;i>t&&!M(i);i--);return e.splice(t,i+1-t),e}function L(t){if(e.isFunction(r.isComplete))return r.isComplete.call(it,t,r);if("*"===r.repeat)return void 0;var i=!1,n=F(!0),a=j(n.l);if(void 0===n.def||n.def.newBlockMarker||n.def.optionality||n.def.optionalQuantifier){i=!0;for(var o=0;a>=o;o++){var s=k(o).match;if(null!==s.fn&&void 0===l().validPositions[o]&&s.optionality!==!0&&s.optionalQuantifier!==!0||null===s.fn&&t[o]!==D(o,s)){i=!1;break}}}return i}function N(e,t){return ot?e-t>1||e-t===1&&r.insertMode:t-e>1||t-e===1&&r.insertMode}function K(i){var n=e._data(i).events,a=!1;e.each(n,function(i,n){e.each(n,function(i,n){if("inputmask"===n.namespace){var o=n.handler;n.handler=function(i){if(void 0===this.inputmask){var n=e(this).data("_inputmask_opts");n?new t(n).mask(this):e(this).unbind(".inputmask")}else{if("setvalue"===i.type||!(this.disabled||this.readOnly&&!("keydown"===i.type&&i.ctrlKey&&67===i.keyCode||r.tabThrough===!1&&i.keyCode===t.keyCode.TAB))){switch(i.type){case"input":if(st===!0||a===!0)return st=!1,i.preventDefault();break;case"keydown":rt=!1,a=!1;break;case"keypress":if(rt===!0)return i.preventDefault();rt=!0;break;case"compositionstart":a=!0;break;case"compositionupdate":st=!0;break;case"compositionend":a=!1}return o.apply(this,arguments)}i.preventDefault()}}}})})}function H(t){function i(t){if(void 0===e.valHooks[t]||e.valHooks[t].inputmaskpatch!==!0){var i=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},n=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(e){if(e.inputmask){if(e.inputmask.opts.autoUnmask)return e.inputmask.unmaskedvalue();var t=i(e),n=e.inputmask.maskset,a=n._buffer;return a=a?a.join(""):"",t!==a?t:""}return i(e)},set:function(t,i){var a,o=e(t);return a=n(t,i),t.inputmask&&o.triggerHandler("setvalue.inputmask"),a},inputmaskpatch:!0}}}function n(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():r.call(this)!==P().join("")?r.call(this):"":r.call(this)}function a(t){s.call(this,t),this.inputmask&&e(this).triggerHandler("setvalue.inputmask")}function o(t){e(t).bind("mouseenter.inputmask",function(){var t=e(this),i=this,n=i.inputmask._valueGet();""!==n&&n!==_().join("")&&t.triggerHandler("setvalue.inputmask")});var i=e._data(t).events,n=i.mouseover;if(n){for(var a=n[n.length-1],o=n.length-1;o>0;o--)n[o]=n[o-1];n[0]=a}}var r,s;t.inputmask.__valueGet||(Object.getOwnPropertyDescriptor&&void 0===t.value?(r=function(){return this.textContent},s=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:n,set:a})):document.__lookupGetter__&&t.__lookupGetter__("value")?(r=t.__lookupGetter__("value"),s=t.__lookupSetter__("value"),t.__defineGetter__("value",n),t.__defineSetter__("value",a)):(r=function(){return t.value},s=function(e){t.value=e},i(t.type),o(t)),t.inputmask.__valueGet=r,t.inputmask._valueGet=function(e){return ot&&e!==!0?r.call(this.el).split("").reverse().join(""):r.call(this.el)},t.inputmask.__valueSet=s,t.inputmask._valueSet=function(e){s.call(this.el,ot?e.split("").reverse().join(""):e)})}function U(i,n,a,o){function s(){if(r.keepStatic){f(!0);var t,n=[],a=e.extend(!0,{},l().validPositions);for(t=v();t>=0;t--){var o=l().validPositions[t];if(o&&(null!=o.match.fn&&n.push(o.input),delete l().validPositions[t],void 0!==o.alternation&&o.locator[o.alternation]===k(t).locator[o.alternation]))break}if(t>-1)for(;n.length>0;){l().p=A(v());var s=e.Event("keypress");s.which=n.pop().charCodeAt(0),W.call(i,s,!0,!1,!1,l().p)}else l().validPositions=e.extend(!0,{},a)}}if((r.numericInput||ot)&&(n===t.keyCode.BACKSPACE?n=t.keyCode.DELETE:n===t.keyCode.DELETE&&(n=t.keyCode.BACKSPACE),ot)){var u=a.end;a.end=a.begin,a.begin=u}n===t.keyCode.BACKSPACE&&(a.end-a.begin<1||r.insertMode===!1)?(a.begin=j(a.begin),void 0===l().validPositions[a.begin]||l().validPositions[a.begin].input!==r.groupSeparator&&l().validPositions[a.begin].input!==r.radixPoint||a.begin--):n===t.keyCode.DELETE&&a.begin===a.end&&(a.end=M(a.end)?a.end+1:A(a.end)+1,void 0===l().validPositions[a.begin]||l().validPositions[a.begin].input!==r.groupSeparator&&l().validPositions[a.begin].input!==r.radixPoint||a.end++),h(a.begin,a.end,!1,o),o!==!0&&s();var c=v(a.begin);c<a.begin?(-1===c&&f(),l().p=A(c)):o!==!0&&(l().p=a.begin)}function q(n){var a=this,o=e(a),s=n.keyCode,c=I(a);s===t.keyCode.BACKSPACE||s===t.keyCode.DELETE||u&&127===s||n.ctrlKey&&88===s&&!i("cut")?(n.preventDefault(),88===s&&(Y=_().join("")),U(a,s,c),T(a,_(),l().p,n,Y!==_().join("")),a.inputmask._valueGet()===P().join("")?o.trigger("cleared"):L(_())===!0&&o.trigger("complete"),r.showTooltip&&o.prop("title",l().mask)):s===t.keyCode.END||s===t.keyCode.PAGE_DOWN?setTimeout(function(){var e=A(v());r.insertMode||e!==S()||n.shiftKey||e--,I(a,n.shiftKey?c.begin:e,e)},0):s===t.keyCode.HOME&&!n.shiftKey||s===t.keyCode.PAGE_UP?I(a,0,n.shiftKey?c.begin:0):(r.undoOnEscape&&s===t.keyCode.ESCAPE||90===s&&n.ctrlKey)&&n.altKey!==!0?(G(a,!0,!1,Y.split("")),o.click()):s!==t.keyCode.INSERT||n.shiftKey||n.ctrlKey?r.tabThrough===!0&&s===t.keyCode.TAB?(n.shiftKey===!0?(null===g(c.begin).fn&&(c.begin=A(c.begin)),c.end=j(c.begin,!0),c.begin=j(c.end,!0)):(c.begin=A(c.begin,!0),c.end=A(c.begin,!0),c.end<S()&&c.end--),c.begin<S()&&(n.preventDefault(),I(a,c.begin,c.end))):r.insertMode!==!1||n.shiftKey||(s===t.keyCode.RIGHT?setTimeout(function(){var e=I(a);I(a,e.begin)},0):s===t.keyCode.LEFT&&setTimeout(function(){var e=I(a);I(a,ot?e.begin+1:e.begin-1)},0)):(r.insertMode=!r.insertMode,I(a,r.insertMode||c.begin!==S()?c.begin:c.begin-1)),r.onKeyDown.call(this,n,_(),I(a).begin,r),lt=-1!==e.inArray(s,r.ignorables)}function W(i,n,a,o,s){var u=this,c=e(u),p=i.which||i.charCode||i.keyCode;if(!(n===!0||i.ctrlKey&&i.altKey)&&(i.ctrlKey||i.metaKey||lt))return p===t.keyCode.ENTER&&Y!==_().join("")&&setTimeout(function(){c.change(),Y=_().join("")},0),!0;if(p){46===p&&i.shiftKey===!1&&","===r.radixPoint&&(p=44);var d,v=n?{begin:s,end:s}:I(u),h=String.fromCharCode(p),k=N(v.begin,v.end);k&&(l().undoPositions=e.extend(!0,{},l().validPositions),U(u,t.keyCode.DELETE,v,!0),v.begin=l().p,r.insertMode||(r.insertMode=!r.insertMode,m(v.begin,o),r.insertMode=!r.insertMode),k=!r.multi),l().writeOutBuffer=!0;var g=ot&&!k?v.end:v.begin,b=x(g,h,o);if(b!==!1){if(b!==!0&&(g=void 0!==b.pos?b.pos:g,h=void 0!==b.c?b.c:h),f(!0),void 0!==b.caret)d=b.caret;else{var P=l().validPositions;d=!r.keepStatic&&(void 0!==P[g+1]&&y(g+1,P[g].locator.slice(),g).length>1||void 0!==P[g].alternation)?g+1:A(g)}l().p=d}if(a!==!1){var w=this;if(setTimeout(function(){r.onKeyValidation.call(w,b,r)},0),l().writeOutBuffer&&b!==!1){var E=_();T(u,E,n?void 0:r.numericInput?j(d):d,i,n!==!0),n!==!0&&setTimeout(function(){L(E)===!0&&c.trigger("complete")},0)}else k&&(l().buffer=void 0,l().validPositions=l().undoPositions)}else k&&(l().buffer=void 0,l().validPositions=l().undoPositions);if(r.showTooltip&&c.prop("title",l().mask),n&&e.isFunction(r.onBeforeWrite)){var M=r.onBeforeWrite.call(this,i,_(),d,r);if(M&&M.refreshFromBuffer){var S=M.refreshFromBuffer;C(S===!0?S:S.start,S.end,M.buffer),f(!0),M.caret&&(l().p=M.caret)}}if(i.preventDefault(),n)return b}}function Q(t){var i=this,n=e(i),a=i.inputmask._valueGet(!0),o=I(i);if("propertychange"===t.type&&i.inputmask._valueGet().length<=S())return!0;if("paste"===t.type){var s=a.substr(0,o.begin),l=a.substr(o.end,a.length);s===P().slice(0,o.begin).join("")&&(s=""),l===P().slice(o.end).join("")&&(l=""),window.clipboardData&&window.clipboardData.getData?a=s+window.clipboardData.getData("Text")+l:t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(a=s+t.originalEvent.clipboardData.getData("text/plain")+l)}var u=a;if(e.isFunction(r.onBeforePaste)){if(u=r.onBeforePaste.call(i,a,r),u===!1)return t.preventDefault(),!1;u||(u=a)}return G(i,!1,!1,ot?u.split("").reverse():u.split("")),T(i,_(),void 0,t,!0),n.click(),L(_())===!0&&n.trigger("complete"),!1}function V(t){var i=this;G(i,!0,!1),L(_())===!0&&e(i).trigger("complete"),t.preventDefault()}function z(e){var t=this;Y=_().join(""),(""===et||0!==e.originalEvent.data.indexOf(et))&&(X=I(t))}function $(t){var i=this,n=I(i);0===t.originalEvent.data.indexOf(et)&&(f(),n=X);var a=t.originalEvent.data;I(i,n.begin,n.end);for(var o=0;o<a.length;o++){var s=e.Event("keypress");s.which=a.charCodeAt(o),rt=!1,lt=!1,W.call(i,s)}setTimeout(function(){var e=l().p;T(i,_(),r.numericInput?j(e):e)},0),et=t.originalEvent.data}function Z(){}function J(i){it=e(i),r.showTooltip&&it.prop("title",l().mask),("rtl"===i.dir||r.rightAlign)&&it.css("text-align","right"),("rtl"===i.dir||r.numericInput)&&(i.dir="ltr",it.removeAttr("dir"),i.inputmask.isRTL=!0,ot=!0),it.unbind(".inputmask"),(it.is(":input")&&n(it.attr("type"))||i.isContentEditable)&&(it.closest("form").bind("submit",function(){Y!==_().join("")&&it.change(),r.clearMaskOnLostFocus&&-1===v()&&it[0].inputmask._valueGet&&it[0].inputmask._valueGet()===P().join("")&&it[0].inputmask._valueSet(""),r.removeMaskOnSubmit&&it.inputmask("remove")}).bind("reset",function(){setTimeout(function(){it.triggerHandler("setvalue.inputmask")},0)}),it.bind("mouseenter.inputmask",function(){var t=e(this),i=this;ut=!0,!t.is(":focus")&&r.showMaskOnHover&&i.inputmask._valueGet()!==_().join("")&&T(i,_())}).bind("blur.inputmask",function(t){var i=e(this),n=this;if(n.inputmask){var a=n.inputmask._valueGet(),o=_().slice();Y!==o.join("")&&setTimeout(function(){i.change(),Y=o.join("")},0),""!==a&&(r.clearMaskOnLostFocus&&(-1===v()&&a===P().join("")?o=[]:R(o)),L(o)===!1&&(setTimeout(function(){i.trigger("incomplete")},0),r.clearIncomplete&&(f(),o=r.clearMaskOnLostFocus?[]:P().slice())),T(n,o,void 0,t))}}).bind("focus.inputmask",function(){var e=this,t=e.inputmask._valueGet();r.showMaskOnFocus&&(!r.showMaskOnHover||r.showMaskOnHover&&""===t)?e.inputmask._valueGet()!==_().join("")&&T(e,_(),A(v())):ut===!1&&I(e,A(v())),r.positionCaretOnTab===!0&&setTimeout(function(){I(e,A(v()))},0),Y=_().join("")}).bind("mouseleave.inputmask",function(){var t=e(this),i=this;if(ut=!1,r.clearMaskOnLostFocus){var n=_().slice(),a=i.inputmask._valueGet();t.is(":focus")||a===t.attr("placeholder")||""===a||(-1===v()&&a===P().join("")?n=[]:R(n),T(i,n))}}).bind("click.inputmask",function(){function t(t){if(r.radixFocus&&""!==r.radixPoint){var i=l().validPositions;if(void 0===i[t]||i[t].input===D(t)){if(t<A(-1))return!0;var n=e.inArray(r.radixPoint,_());if(-1!==n){for(var a in i)if(a>n&&i[a].input!==D(a))return!1;return!0}}}return!1}var i=this;if(e(i).is(":focus")){var n=I(i);if(n.begin===n.end)if(t(n.begin))I(i,e.inArray(r.radixPoint,_()));else{var a=n.begin,o=A(v(a));o>a?I(i,M(a)||M(a-1)?a:A(a)):I(i,r.numericInput?0:o)}}}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){I(e,0,A(v()))},0)}).bind(d+".inputmask dragdrop.inputmask drop.inputmask",Q).bind("cut.inputmask",function(i){st=!0;var n=this,a=e(n),o=I(n);if(ot){var s=window.clipboardData||i.originalEvent.clipboardData,u=s.getData("text").split("").reverse().join("");s.setData("text",u)}U(n,t.keyCode.DELETE,o),T(n,_(),l().p,i,Y!==_().join("")),n.inputmask._valueGet()===P().join("")&&a.trigger("cleared"),r.showTooltip&&a.prop("title",l().mask)
}).bind("complete.inputmask",r.oncomplete).bind("incomplete.inputmask",r.onincomplete).bind("cleared.inputmask",r.oncleared),it.bind("keydown.inputmask",q).bind("keypress.inputmask",W),p||it.bind("compositionstart.inputmask",z).bind("compositionupdate.inputmask",$).bind("compositionend.inputmask",Z),"paste"===d&&it.bind("input.inputmask",V)),it.bind("setvalue.inputmask",function(){var t=this,i=t.inputmask._valueGet();t.inputmask._valueSet(e.isFunction(r.onBeforeMask)?r.onBeforeMask.call(t,i,r)||i:i),G(t,!0,!1),Y=_().join(""),(r.clearMaskOnLostFocus||r.clearIncomplete)&&t.inputmask._valueGet()===P().join("")&&t.inputmask._valueSet("")}),H(i);var a=e.isFunction(r.onBeforeMask)?r.onBeforeMask.call(i,i.inputmask._valueGet(),r)||i.inputmask._valueGet():i.inputmask._valueGet();G(i,!0,!1,a.split(""));var o=_().slice();Y=o.join("");var s;try{s=document.activeElement}catch(u){}L(o)===!1&&r.clearIncomplete&&f(),r.clearMaskOnLostFocus&&(o.join("")===P().join("")?o=[]:R(o)),T(i,o),s===i&&I(i,A(v())),K(i)}var Y,X,et,tt,it,nt,at,ot=!1,rt=!1,st=!1,lt=!1,ut=!0;if(void 0!==a)switch(a.action){case"isComplete":return tt=a.el,it=e(tt),o=tt.inputmask.maskset,r=tt.inputmask.opts,L(a.buffer);case"unmaskedvalue":return tt=a.el,void 0===tt?(it=e({}),tt=it[0],tt.inputmask=new t,tt.inputmask.opts=r,tt.inputmask.el=tt,tt.inputmask.maskset=o,tt.inputmask.isRTL=r.numericInput,r.numericInput&&(ot=!0),at=(e.isFunction(r.onBeforeMask)?r.onBeforeMask.call(it,a.value,r)||a.value:a.value).split(""),G(it,!1,!1,ot?at.reverse():at),e.isFunction(r.onBeforeWrite)&&r.onBeforeWrite.call(this,void 0,_(),0,r)):it=e(tt),o=tt.inputmask.maskset,r=tt.inputmask.opts,ot=tt.inputmask.isRTL,B(it);case"mask":Y=_().join(""),J(a.el);break;case"format":return it=e({}),it[0].inputmask=new t,it[0].inputmask.opts=r,it[0].inputmask.el=it[0],it[0].inputmask.maskset=o,it[0].inputmask.isRTL=r.numericInput,r.numericInput&&(ot=!0),at=(e.isFunction(r.onBeforeMask)?r.onBeforeMask.call(it,a.value,r)||a.value:a.value).split(""),G(it,!1,!1,ot?at.reverse():at),e.isFunction(r.onBeforeWrite)&&r.onBeforeWrite.call(this,void 0,_(),0,r),a.metadata?{value:ot?_().slice().reverse().join(""):_().join(""),metadata:it.inputmask("getmetadata")}:ot?_().slice().reverse().join(""):_().join("");case"isValid":it=e({}),it[0].inputmask=new t,it[0].inputmask.opts=r,it[0].inputmask.el=it[0],it[0].inputmask.maskset=o,it[0].inputmask.isRTL=r.numericInput,r.numericInput&&(ot=!0),at=a.value.split(""),G(it,!1,!0,ot?at.reverse():at);for(var ct=_(),pt=F(),dt=ct.length-1;dt>pt&&!M(dt);dt--);return ct.splice(pt,dt+1-pt),L(ct)&&a.value===ct.join("");case"getemptymask":return tt=a.el,it=e(tt),o=tt.inputmask.maskset,r=tt.inputmask.opts,P();case"remove":tt=a.el,it=e(tt),o=tt.inputmask.maskset,r=tt.inputmask.opts,tt.inputmask._valueSet(B(it)),it.unbind(".inputmask");var ft;Object.getOwnPropertyDescriptor&&(ft=Object.getOwnPropertyDescriptor(tt,"value")),ft&&ft.get?tt.inputmask.__valueGet&&Object.defineProperty(tt,"value",{get:tt.inputmask.__valueGet,set:tt.inputmask.__valueSet}):document.__lookupGetter__&&tt.__lookupGetter__("value")&&tt.inputmask.__valueGet&&(tt.__defineGetter__("value",tt.inputmask.__valueGet),tt.__defineSetter__("value",tt.inputmask.__valueSet)),tt.inputmask=void 0;break;case"getmetadata":if(tt=a.el,it=e(tt),o=tt.inputmask.maskset,r=tt.inputmask.opts,e.isArray(o.metadata)){for(var vt,mt=v(),ht=mt;ht>=0;ht--)if(l().validPositions[ht]&&void 0!==l().validPositions[ht].alternation){vt=l().validPositions[ht].alternation;break}return void 0!==vt?o.metadata[l().validPositions[mt].locator[vt]]:o.metadata[0]}return o.metadata}}t.prototype={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:void 0,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:void 0,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",groupSeparator:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,positionCaretOnTab:!1,tabThrough:!1,supportsInputType:[],definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:e.noop,postValidation:void 0},masksCache:{},mask:function(i){var n=i.jquery&&i.length>0?i[0]:i,a=e.extend(!0,{},this.opts);o(i,a,e.extend(!0,{},this.userOptions));var l=r(a,this.noMasksCache);return void 0!==l&&(n.inputmask=n.inputmask||new t,n.inputmask.opts=a,n.inputmask.noMasksCache=this.noMasksCache,n.inputmask.el=n,n.inputmask.maskset=l,n.inputmask.isRTL=!1,e(n).data("_inputmask_opts",a),s({action:"mask",el:n},l,n.inputmask.opts)),i},unmaskedvalue:function(){return this.el?s({action:"unmaskedvalue",el:this.el}):void 0},remove:function(){return this.el?(s({action:"remove",el:this.el}),this.el.inputmask=void 0,this.el):void 0},getemptymask:function(){return this.el?s({action:"getemptymask",el:this.el}):void 0},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.el?s({action:"isComplete",buffer:this.el.inputmask._valueGet().split(""),el:this.el}):void 0},getmetadata:function(){return this.el?s({action:"getmetadata",el:this.el}):void 0}},t.extendDefaults=function(i){e.extend(t.prototype.defaults,i)},t.extendDefinitions=function(i){e.extend(t.prototype.defaults.definitions,i)},t.extendAliases=function(i){e.extend(t.prototype.defaults.aliases,i)},t.format=function(i,n,o){var l=e.extend(!0,{},t.prototype.defaults,n);return a(l.alias,n,l),s({action:"format",value:i,metadata:o},r(l,n&&void 0!==n.definitions),l)},t.unmask=function(i,n){var o=e.extend(!0,{},t.prototype.defaults,n);return a(o.alias,n,o),s({action:"unmaskedvalue",value:i},r(o,n&&void 0!==n.definitions),o)},t.isValid=function(i,n){var o=e.extend(!0,{},t.prototype.defaults,n);return a(o.alias,n,o),s({action:"isValid",value:i},r(o,n&&void 0!==n.definitions),o)},t.escapeRegex=function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return e.replace(new RegExp("(\\"+t.join("|\\")+")","gim"),"\\$1")},t.keyCode={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};var l=navigator.userAgent,u=null!==l.match(new RegExp("iphone","i")),c=null!==l.match(new RegExp("android.*chrome.*","i")),p=null!==l.match(new RegExp("android.*firefox.*","i")),d=i("paste")?"paste":i("input")?"input":"propertychange";return window.Inputmask=t,t}(jQuery),function(e){return void 0===e.fn.inputmask&&(e.fn.inputmask=function(t,i){var n,a;if(i=i||{},"string"==typeof t)switch(t){case"mask":return n=new Inputmask(i),this.each(function(){n.mask(this)});case"unmaskedvalue":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.unmaskedvalue():e(a).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.getemptymask():"";case"hasMaskedValue":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.hasMaskedValue():!1;case"isComplete":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.isComplete():!0;case"getmetadata":return a=this.jquery&&this.length>0?this[0]:this,a.inputmask?a.inputmask.getmetadata():void 0;case"setvalue":a=this.jquery&&this.length>0?this[0]:this,e(a).val(i),void 0===a.Inputmask&&e(a).triggerHandler("setvalue.inputmask");break;default:return i.alias=t,n=new Inputmask(i),this.each(function(){n.mask(this)})}else{if("object"==typeof t)return n=new Inputmask(t),this.each(function(){n.mask(this)});if(void 0===t)return this.each(function(){n=new Inputmask(i),n.mask(this)})}}),e.fn.inputmask}(jQuery);
!function(a){"function"==typeof define&&define.amd?define(["jquery","inputmask"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("./inputmask")):a(jQuery,window.Inputmask)}(function(a,b){return b.extendAliases({Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(a,b){return new RegExp(b.regex).test(a.join(""))},definitions:{r:{validator:function(b,c,d,e,f){function g(a,b){this.matches=[],this.isGroup=a||!1,this.isQuantifier=b||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function h(){var a,b,c=new g,d=[];for(f.regexTokens=[];a=f.tokenizer.exec(f.regex);)switch(b=a[0],b.charAt(0)){case"(":d.push(new g(!0));break;case")":j=d.pop(),d.length>0?d[d.length-1].matches.push(j):c.matches.push(j);break;case"{":case"+":case"*":var e=new g(!1,!0);b=b.replace(/[{}]/g,"");var h=b.split(","),i=isNaN(h[0])?h[0]:parseInt(h[0]),k=1===h.length?i:isNaN(h[1])?h[1]:parseInt(h[1]);if(e.quantifier={min:i,max:k},d.length>0){var l=d[d.length-1].matches;a=l.pop(),a.isGroup||(j=new g(!0),j.matches.push(a),a=j),l.push(a),l.push(e)}else a=c.matches.pop(),a.isGroup||(j=new g(!0),j.matches.push(a),a=j),c.matches.push(a),c.matches.push(e);break;default:d.length>0?d[d.length-1].matches.push(b):c.matches.push(b)}c.matches.length>0&&f.regexTokens.push(c)}function i(b,c){var d=!1;c&&(l+="(",n++);for(var e=0;e<b.matches.length;e++){var f=b.matches[e];if(f.isGroup===!0)d=i(f,!0);else if(f.isQuantifier===!0){var g=a.inArray(f,b.matches),h=b.matches[g-1],j=l;if(isNaN(f.quantifier.max)){for(;f.repeaterPart&&f.repeaterPart!==l&&f.repeaterPart.length>l.length&&!(d=i(h,!0)););d=d||i(h,!0),d&&(f.repeaterPart=l),l=j+f.quantifier.max}else{for(var k=0,m=f.quantifier.max-1;m>k&&!(d=i(h,!0));k++);l=j+"{"+f.quantifier.min+","+f.quantifier.max+"}"}}else if(void 0!==f.matches)for(var p=0;p<f.length&&!(d=i(f[p],c));p++);else{var q;if("["==f.charAt(0)){q=l,q+=f;for(var r=0;n>r;r++)q+=")";var s=new RegExp("^("+q+")$");d=s.test(o)}else for(var t=0,u=f.length;u>t;t++)if("\\"!==f.charAt(t)){q=l,q+=f.substr(0,t+1),q=q.replace(/\|$/,"");for(var r=0;n>r;r++)q+=")";var s=new RegExp("^("+q+")$");if(d=s.test(o))break}l+=f}if(d)break}return c&&(l+=")",n--),d}var j,k=c.buffer.slice(),l="",m=!1,n=0;null===f.regexTokens&&h(),k.splice(d,0,b);for(var o=k.join(""),p=0;p<f.regexTokens.length;p++){var q=f.regexTokens[p];if(m=i(q,q.isGroup))break}return m},cardinality:1}}}}),b});
!function(a){"function"==typeof define&&define.amd?define(["jquery","inputmask"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("./inputmask")):a(jQuery,window.Inputmask)}(function(a,b){return b.extendDefinitions({A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Fa-f]",cardinality:1,casing:"upper"}}),b.extendAliases({url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(a,b,c,d,e){return!0},cardinality:8,prevalidator:function(){for(var a=[],b=8,c=0;b>c;c++)a[c]=function(){var a=c;return{validator:function(b,c,d,e,f){if(f.regex["urlpre"+(a+1)]){var g,h=b;a+1-b.length>0&&(h=c.buffer.join("").substring(0,a+1-b.length)+""+h);var i=f.regex["urlpre"+(a+1)].test(h);if(!e&&!i){for(d-=a,g=0;g<f.defaultPrefix.length;g++)c.buffer[d]=f.defaultPrefix[g],d++;for(g=0;g<h.length-1;g++)c.buffer[d]=h[g],d++;return{pos:d}}return i}return!1},cardinality:a}}();return a}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(a,b,c,d,e){return c-1>-1&&"."!==b.buffer[c-1]?(a=b.buffer[c-1]+a,a=c-2>-1&&"."!==b.buffer[c-2]?b.buffer[c-2]+a:"0"+a):a="00"+a,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(a)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(a,b){return a=a.toLowerCase(),a.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}},mac:{mask:"##:##:##:##:##:##"}}),b});

$(document).ready(function() {
    jQuery.preventDefaultEvent = function(e, options) {
        options = options || {shift:1, ctrl:1, alt:1, meta:1};
        var href = e.currentTarget.getAttribute('href');
        if(((options.shift && e.shiftKey)
                || (options.alt && e.altKey)
                || (options.ctrl && e.ctrlKey)
                || (options.meta && e.metaKey))
            && href && href.indexOf('#') != 0
            && href.indexOf('javascript:') != 0
        ) return true;
        e.preventDefault();
        return false;
    }

    var preLoader = '<div class="blur_block" id="NXPreLoader"><div class="nx-load">o</div></div>',
        //inputMask = '+9{1,3}9999{5,7}'; // Маска для телефона
        inputMask = '+7(999)999-99-99';

    function NxGoals ($eventAction, $eventLabel) {
        window.dataLayer = window.dataLayer || [];
        dataLayer.push({'event': 'event-to-ga', 'eventCategory' : 'send', 'eventAction' : $eventAction, 'eventLabel' : $eventLabel});
    }

    $(function() {
        $('.nx_call_form').submit(function(e) {if($.preventDefaultEvent(e)) return false;});
    });

    function ShowNxCallForm(object, url, dataRequest) {

        $.ajax({
            url: url,
            type: 'POST',
            data: dataRequest,
            dataType: 'json',
            beforeSend: function () {
                $('body').append(preLoader);
            },

        }).done(function(data) {
                $('#NXPreLoader').remove();

                var nxAjax = data.AJAX,
                    nxForm = '';

                if(nxAjax) {
                    nxForm = '<div id="' + nxAjax.form_id + '" class="' + nxAjax.form_class + '">' + nxAjax.form + '</div>';
                    nxShowPopUp(nxForm, 'request-form_modal');
                    $('form input[type=tel]').inputmask(inputMask);
                    $('.ajax_call_form_static').fadeIn();
                }
            }
        );
    }

    $('body').on('submit', '.nx_call_form', function(){
        $('form .g-color-red').remove();

        var element = $(this),
            currentUrl = element.find('[name="nx_form_path"]').val(),
            nxDestName = "#feedback_"+element.attr('name'),
            formData = new FormData(this),
            evLabel = 'form_send',
            evAction = 'write_to_us';

        NxGoals(evAction, evLabel);
        console.log('Send form ' + nxDestName);

        $.ajax({
            url: currentUrl,
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            timeout: 50000,
            beforeSend: function () {
                $('body').append(preLoader);
            },
        }).done(function (data) {
            $('#NXPreLoader').remove();
            var nxAjax = data.AJAX;
            if(nxAjax) {
                if(nxAjax.send) {
                    $(nxDestName).empty().append(nxAjax.message_html);
                }
                else {
                    $(nxDestName).empty().append(nxAjax.error + nxAjax.form);
                    $('html,body').animate({scrollTop: $(nxDestName).offset().top-73});
                }
            }
        });

        return false;
    });


    function NXGetFormData(object) {

        var currentPage = window.location.origin + window.location.pathname,
            dataFormSrc = object.attr('data-form'),
            dataForm = {'nx_json' : false};

        if(dataFormSrc.length) {
            dataForm = JSON.parse(dataFormSrc);
            dataForm.nx_json = true;
        }

        dataForm.nx_form_ajax = 'Y';
        dataForm.page = currentPage;

        return dataForm;
    }

    $('body').on('click', '.show-message-form', function(){
        ShowNxCallForm($(this), '/ajax/nx_message.php', NXGetFormData($(this)));
        return false;
    });

});